{
  "name": "lj-s-tutoring",
  "private": true,
  "workspaces": [
    "web",
    "lms-api"
  ],
  "type": "commonjs",
  "engines": {
    "node": "20.x"
  },
  "dependencies": {
    "http-server": "^14.1.1"
  },
  "devDependencies": {
    "@playwright/test": "^1.49.1",
    "@tailwindcss/typography": "^0.5.16",
    "cpy-cli": "^5.0.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.57.0",
    "html-validate": "^9.5.3",
    "jsdom": "^24.0.0",
    "husky": "^9.0.11",
    "linkinator": "^6.1.2",
    "mkdirp": "^3.0.1",
    "npm-run-all": "^4.1.5",
    "pa11y-ci": "^4.0.1",
    "rimraf": "^5.0.5",
    "tailwindcss": "^3.4.17",
    "vitest": "^2.1.8",
    "wait-on": "^7.2.0"
  },
  "scripts": {
    "clean": "rimraf dist",
    "prebuild": "echo Preparing Next.js build",
    "build:css": "tailwindcss -c tailwind.config.js -i ./assets/tailwind-input.css -o ./dist/assets/tailwind-input.css --minify",
    "build:html": "cpy \"*.html\" dist --flat",
    "build:static": "cpy \"favicon.svg\" \"robots.txt\" \"sitemap.xml\" dist --flat",
    "build:guides": "cpy \"guides/*.html\" dist/guides",
    "build:images": "cpy \"images/*\" dist/images",
    "build:assets": "cpy \"assets/*.js\" \"assets/*.css\" dist/assets --flat",
    "build:games": "cpy \"assets/games/*.js\" dist/assets/games",
    "build:lib": "cpy \"assets/lib/*.js\" dist/assets/lib",
    "build:data": "cpy \"assets/data/*.json\" dist/assets/data",
    "build:sw": "cpy \"sw.js\" dist --flat",
    "inject:config": "node scripts/inject-config.js",
    "inject:sw-version": "node scripts/inject-sw-version.js",
    "check:build-js": "node scripts/check-built-js.js",
    "check:csp-dist": "node scripts/check-dist-csp.js",
    "check:headers": "node scripts/check-netlify-headers.js",
    "check:public-config": "node scripts/check-public-config.js",
    "check:prod-config": "node scripts/check-prod-config.js",
    "strip:internal": "node scripts/strip-internal-pages.js",
    "build:legacy": "echo 'Legacy build retired - use Next.js instead (npm run build:web)'",
    "build:web": "npm run build --prefix web",
    "build:api": "npm run build --prefix lms-api",
    "build": "npm run build:web && npm run build:api",
    "serve": "http-server dist -p 8080 -c-1",
    "start:web": "npm run start --prefix web",
    "start:api": "npm run start --prefix lms-api",
    "start": "npm-run-all --parallel start:web start:api",
    "dev:css": "tailwindcss -c tailwind.config.js -i ./assets/tailwind-input.css -o ./dist/assets/tailwind-input.css --watch",
    "dev:full": "echo Legacy dev:full retired - use dev:next instead",
    "dev:static": "npm-run-all --parallel dev:css serve",
    "dev:api": "npm run dev --prefix lms-api",
    "dev:web": "npm run dev --prefix web",
    "dev:legacy": "echo Legacy dev:legacy retired - use dev:next instead",
    "dev:next": "npm-run-all --parallel dev:web dev:api",
    "dev": "npm run dev:next",
    "migrate": "npm run migrate --prefix lms-api",
    "db:create:local": "npm run db:create:local --prefix lms-api",
    "test": "npm run test --prefix lms-api",
    "test:e2e:api": "npm run test:e2e --prefix lms-api",
    "db:migrate:test": "npm run db:migrate:test --prefix lms-api",
    "db:reset:test": "npm run db:reset:test --prefix lms-api",
    "seed:test": "npm run seed:test --prefix lms-api",
    "retention:cleanup": "npm run retention:cleanup --prefix lms-api",
    "retention:queue": "npm run retention:queue --prefix lms-api",
    "job:worker": "npm run job:worker --prefix lms-api",
    "start:api:test": "NODE_ENV=test DATABASE_URL=$DATABASE_URL_TEST PORT=3001 npm run start:test --prefix lms-api",
    "start:static:test": "http-server dist -p 8080 -c-1 --silent",
    "test:unit": "vitest run",
    "test:api": "npm run test --prefix lms-api",
    "test:e2e": "mkdir -p test-results lms-api/test-results && npm run build:web && npm run db:reset:test && npm run seed:test && playwright test",
    "test:all": "npm-run-all lint security:check test:unit test:api test:e2e build",
    "lint:js": "eslint \"assets/**/*.js\" \"scripts/**/*.js\" --ignore-pattern \"assets/{admin,tutor,student}\" || true",
    "lint:html": "html-validate \"*.html\" \"guides/*.html\" || exit 0",
    "security:check": "node scripts/security-check.js",
    "rollback:generate": "node scripts/generate-rollback-plan.js",
    "rollback:check": "node scripts/check-rollback-plan.js",
    "lint": "npm-run-all --parallel lint:js lint:html security:check check:headers",
    "check:quickmath-export": "node scripts/check-quickmath-export.mjs",
    "qa:html": "html-validate \"dist/*.html\" \"dist/guides/*.html\"",
    "qa:links": "linkinator http://localhost:8080 --recurse --timeout 10000 --concurrency 4 --skip \"^mailto:|^tel:|^https?:\\/\\/(?!localhost:8080)\"",
    "qa:a11y": "pa11y-ci",
    "qa:quick": "npm run build:web && npm-run-all --parallel qa:html qa:links",
    "qa": "npm run build:web && npm-run-all --parallel qa:html qa:links qa:a11y",
    "fetch:words": "node scripts/fetch-words.js",
    "lint:web": "npm run lint --prefix web",
    "typecheck:web": "npm run typecheck --prefix web",
    "test:web": "npm run test --prefix web",
    "check:web": "npm run lint:web && npm run typecheck:web && npm run test:web",
    "prepare": "husky || true"
  }
}
